<div class="edit-trip-container">
  <!-- Header Section -->
  <div class="edit-header py-5 <%= 'has-image' if @trip.cover_image.attached? %>"
      style="<%= @trip.cover_image.attached? ? "background: linear-gradient(rgba(55, 65, 250, 0.6), rgba(55, 65, 250, 0.6)), url('#{url_for(@trip.cover_image)}');" : 'background-color: #3741FA;' %>">
    <div class="container h-100">
      <div class="d-flex flex-column align-items-center justify-content-center h-100 text-center">
        <h1 class="display-5 fw-bold mb-2">Edit Your Trip</h1>
        <p class="lead">
          Update your <%= @trip.title %> trip details
        </p>
      </div>
    </div>
  </div>

  <!-- Form Section -->
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="edit-form-card card shadow-sm border-0 p-4">
          <%= simple_form_for @trip do |f| %>
            <div class="row g-4">
              <div class="col-md-6">
                <%= f.input :title,
                  label: "Trip Name",
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;",
                    placeholder: "Summer Vacation 2023"
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>

              <div class="col-md-6">
                <%= f.input :destination,
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;",
                    placeholder: "Bali, Indonesia"
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>

              <div class="col-md-6">
                <%= f.input :country,
                  as: :string,
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;",
                    placeholder: "Indonesia"
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>

              <div class="col-md-6">
                <%= f.input :accommodation_type,
                  as: :select,
                  collection: Trip::ACCOMMODATION_OPTIONS.map { |opt| [opt.humanize, opt] },
                  prompt: "Select Accommodation",
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;",
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>

              <div class="col-md-6">
                <%= f.input :start_date,
                  as: :date,
                  html5: true,
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;"
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>
              <div class="alert alert-info alert-dismissible fade show d-inline-flex align-items-center py-2 px-3 ms-auto" style="max-width: 420px;">
                <i class="fas fa-info-circle me-2"></i>
                <span class="pe-3 me-auto">You can set past dates when editing an existing trip.</span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>

              <div class="col-md-6">
                <%= f.input :end_date,
                  as: :date,
                  html5: true,
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    data: {
                      controller: "trip-dates",
                      action: "change->trip-dates#validate"
                    },
                    error_html: {
                      class: "text-danger small"
                    },
                    style: "font-family: 'DM Sans', sans-serif;"
                  },
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>

              <div class="col-md-6">
                <%= f.input :cover_image,
                  as: :file,
                  wrapper_html: { class: "mb-3" },
                  input_html: {
                    class: "form-control-lg",
                    style: "font-family: 'DM Sans', sans-serif;"
                  },
                  label: "Cover Image",
                  label_html: {
                    class: "form-label fw-semibold small text-uppercase text-muted",
                    style: "font-family: 'Poppins', sans-serif; font-weight: 500;"
                  } %>
              </div>
            </div>

            <div class="form-actions mt-4 d-flex justify-content-between">
              <%= link_to "Cancel", trip_path(@trip), class: "btn cancel-button px-4", style: "font-family: 'DM Sans', sans-serif; border-radius: 10px;" %>
              <%= f.submit "Update Trip", class: "btn btn-home-primary-cta px-4", style: "font-family: 'DM Sans', sans-serif; border-radius: 10px;" %>
              <%= link_to "Delete Trip", trip_path(@trip),
                  method: :delete,
                  data: { confirm: "Are you sure you want to delete this trip?" },
                  class: "btn btn-outline-danger px-4",
                  style: "font-family: 'DM Sans', sans-serif; border-radius: 10px;" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
